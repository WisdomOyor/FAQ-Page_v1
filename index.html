<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Frequently Asked Questions</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="assets/IITA-logo-01.svg" />
  </head>
  <body>
    <div class="wrapper">
      <div class="flex">
        <div class="logo mr-1"><img src="assets/IITA-logo.gif" alt="" /></div>
        <h3>FAQ System for <strong>PAR</strong></h3>
      </div>
      <h1>Frequently Asked Questions</h1>

      <!-- Search Bar -->
      <input type="text" id="searchInput" placeholder="Type in a keyword, e.g workplan" />

      <!-- Additional filtering options -->
      <div id="filterOptions">
        <div class="filter-groups filter-group-1">
          <div class="filter-option" data-category="APPRAISEE">
            <p>Are you an APPRAISEE?</p>
            <div class="checkboxes">
              <label><input type="checkbox" value="Yes" /> Yes</label>
            </div>
          </div>
          <div class="filter-option" data-category="APPRAISER">
            <p>Are you an APPRAISER?</p>
            <div class="checkboxes">
              <label><input type="checkbox" value="Yes" /> Yes</label>
            </div>
          </div>
        </div>
        <div class="filter-groups filter-group-2">
          <div class="filter-option" data-category="NRS/IRS">
            <p>Are you an NRS/IRS Professional?</p>
            <div class="checkboxes">
              <label><input type="checkbox" value="Yes" /> Yes</label>
            </div>
          </div>
          <div class="filter-option" data-category="R4D/P4D">
            <p>Are you an R4D/P4D/Services Professional?</p>
            <div class="checkboxes">
              <label><input type="checkbox" value="Yes" /> Yes</label>
            </div>
          </div>
        </div>
        <div class="filter-groups filter-group-3">
          <div class="filter-option" data-category="NRS/IRS">
            <p>Are you managing NRS/IRS Professionals' Appraisals?</p>
            <div class="checkboxes">
              <label><input type="checkbox" value="Yes" /> Yes</label>
            </div>
          </div>
          <div class="filter-option" data-category="R4D/P4D">
            <p>Are you managing R4D/P4D/Services Appraisals?</p>
            <div class="checkboxes">
              <label><input type="checkbox" value="Yes" /> Yes</label>
            </div>
          </div>
        </div>
        <!-- Add more filter options groups here as needed -->
      </div>

      <div class="faq" data-category="APPRAISEE NRS/IRS">
        <button class="accordion">
          I need a step-by-step guide on all I need to do as an APPRAISEE (NRS/IRS)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <ol>
            <li><strong>Login</strong> to your account</li>
            <li>Check your links to make sure they are complete. It should look similar to this:</li>
            <img src="assets/img-04-01.svg" alt="Screenshot of complete Workplan links" />
            <br />
            <p>If they're not, refer to the question "<strong>What do I do if my NRS/IRS Workplan links aren't complete?</strong>"</p>
            <br /><br />

            <li>Click "NRS Achievements", and add your achievements for the previous year.</li>
            <img src="assets/img-04-06.svg" alt="Screenshot for NRS Achievements">

            <li>
              Once you're done, go to your Workplan page by clicking on "NRS Workplan". <br> Proceed to upload your Workplan by <strong>adding new records to it</strong> OR by <strong>importing your Excel (.xls) file.</strong> <br />
              <p>Make sure you click the appropriate year.</p>
              <p>If you need help with this step, refer to the relevant questions in this FAQ page.</p>
            </li>
            <img src="assets/img-04-02.svg" alt="Screenshot of Workplan upload" />

            <li>Submit the work plan</li>
            <img src="assets/img-04-03.svg" alt="Screenshot of Workplan submission" />

            <li>
              Get it approved by your appraiser. <br />
              <p>You may reach out to them to notify them that your Workplan has been submitted for appraisal.</p>
            </li>

            <li>View your appraisal information by clicking on the appropriate link, e.g: <br>
            <p>Click the "My Appraisals" link in the dashboard to view this page.</p>
            <p>Make sure you click the appropriate year.</p>
            <p>You can generate/download: <br>
              - Your Report, by clicking <strong>R</strong>. <br>
              - Your Workplan, by clicking <strong>WP</strong>. <br>
              - Your Appraisal Record PDF, by clicking <strong>PDF</strong> (if link is displayed on your page).
              </p>
          </li>
            <img src="assets/img-04-04.svg" alt="Screenshot of appraisal information" />

            <li>On the following page, scroll to <strong>Part IV</strong>. Add your comment, and indicate if you want to <strong>appeal</strong> or not.</li>
            <img src="assets/img-04-05.svg" alt="Screenshot of comment section" />
          </ol>
        </div>
      </div>

      <div class="faq" data-category="APPRAISER NRS/IRS">
        <button class="accordion">
          I need a step-by-step guide on all I need to do as an APPRAISER (NRS/IRS)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p>As an Appraiser, your role involves reviewing and either approving or rejecting your appraisee's Workplan. Here's how:</p>
          <ol>
            <li>On your dashboard, click on <strong>Supervise</strong>.</li>
            <img src="assets/img-02-01.svg" alt="Screenshot of dashboard with 'Supervise' button" />

            <li><strong>Switch to</strong> the profile of the appraisee, for example, Adeola Bolatito.</li>
            <img src="assets/img-02-02.svg" alt="Screenshot of profile switch" />

            <li>Click on the <strong>NRS Workplan</strong> link on your appraisee's dashboard.</li>
            <img src="assets/img-02-03.svg" alt="Screenshot of NRS Workplan link" />

            <li>Click on the <strong>Approve</strong> button.</li>
            <img src="assets/img-02-04.svg" alt="Screenshot of Approve button" />

            <li>Click on <strong>Return to yourself</strong>.</li>
            <img src="assets/img-02-05.svg" alt="Screenshot of 'Return to yourself' button" />

            <li>On your Dashboard, find the link to manage your appraisals, e.g Manage ...</li>
            <img src="assets/img-05-01.svg" alt="Screenshot of link to manage appraisals" />

            <li>Click on the link via which you can access the Workplan. <br>
              <p>Make sure you click the appropriate year.</p>
            </li>
            <img src="assets/img-05-02.svg" alt="Screenshot of link to access Workplan" />

            <li>On the following page, click the <strong>Edit appraisal</strong>, and fill the form appropriately</li>
            <img src="assets/img-05-03.svg" alt="Screenshot of 'Edit appraisal' button" />

            <li>On the "Edit appraisal" page, click on <strong>Preview and Finalize</strong> only after you have completed all these processes</li>
            <p>Ensure that the appraisee adds their comment.</p>
            <p>Make sure that all the Workplan statuses say YES</p>
            <img src="assets/img-05-04.svg" alt="Screenshot of Workplan statuses" />

            <li>After clicking "<strong>Preview & Finalize</strong>", thoroughly review the appraisal, then click "<strong>Submit Final Score</strong>".</li>
            <img src="assets/img-05-05.svg" alt="Screenshot of 'Submit Final Score' button" />
          </ol>
        </div>
      </div>

      <div class="faq" data-category="APPRAISEE R4D/P4D">
        <button class="accordion">
          I need a step-by-step guide on all I need to do as an APPRAISEE (R4D/P4D/Services)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p>As an Appraisee (R4D/P4D/Services), you have a few tasks to complete. Here's a step-by-step guide:</p>
          <ol>
            <li>
              First, as a non-new staff, you need to add your Achievements:
              <ul>
                <li>Click on <strong>Achievement</strong> on your Dashboard.</li>
                <li>Pick the appropriate year.</li>
                <li>Click the appropriate link as shown below. E.g Add achievement to "[Workplan Activity]"</li>
                <img src="assets/img-06-01.svg" alt="Screenshot of 'New Achievement' button" />
                <li>Type in your Achievement.</li>
                <li>State the Completion(%).</li>
                <li>Click <strong>Update</strong>.</li>
                <img src="assets/img-06-02.svg" alt="Screenshot of 'Update' button for Achievement" />
              </ul>
            </li>

            <li>
              Next, submit your Workplan:
              <ul>
                <li>Click the appropriate link to access your workplans, e.g. <strong>R4D Workplans</strong>.</li>
                <li>Pick the appropriate year.</li>
                <li>Click on <strong>add new records to your Workplan [year]</strong>.</li>
                <img src="assets/img-06-05.svg" alt="Screenshot of 'Add new records to Workplan' button" />
                <li>Select the appropriate Performance Criteria.</li>
                <li>Type in your Performance Criteria Description.</li>
                <li>Update the Activity Year and Output target/products/deliverables/research outputs/milestones Year appropriately.</li>
                <li>Click <strong>Update</strong>.</li>
                <img src="assets/img-06-06.svg" alt="Screenshot of 'Update' button for Workplan" />
                <li>Click the appropriate link to your workplan.</li>
                <img src="assets/img-06-07.svg" alt="Screenshot of 'Update' button for Workplan" />
                <li>Click <strong>Add activity</strong>.</li>
                <img src="assets/img-06-08.svg" alt="Screenshot of 'Update' button for Workplan" />
                <li>Fill the form appropraitely and click <strong>Update</strong>.</li>
                <img src="assets/img-06-09.svg" alt="Screenshot of 'Update' button for Workplan" />
                <img src="assets/img-06-10.svg" alt="Screenshot of 'Update' button for Workplan" />
                <li>You can also <strong>edit</strong> your workplan.</li>
                <img src="assets/img-06-11.svg" alt="Screenshot of 'Update' button for Workplan" />
                <img src="assets/img-06-12.svg" alt="Screenshot of 'Update' button for Workplan" />
              </ul>
            </li>
            <li>
              Next, get Appraised:
              <ul>
                <li>Click <strong>My Appraisals</strong>.</li>
                <li>Click the link to access your Appraisal.</li>
                <img src="assets/img-06-03.svg" alt="Screenshot of 'My Appraisals' button" />
                <li>Fill the form appropriately.</li>
                <li>Add your Comments.</li>
                <li>Indicate if you want to appeal or not.</li>
                <li>Click <strong>Save Comment</strong>.</li>
                <img src="assets/img-06-04.svg" alt="Screenshot of 'Save Comment' button" />
              </ul>
            </li>
          </ol>
          <p><strong>NB: </strong>If your total weights are not 100%, please refer to your supervisor to rectify that.</p>
        </div>
      </div>

      <div class="faq" data-category="APPRAISER R4D/P4D">
        <button id="appraisals" class="accordion">
          I need a step-by-step guide on all I need to do as an APPRAISER (R4D/P4D/Services)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p>As an Appraiser, your role involves reviewing your appraisee's Workplan. Here's how:</p>
          <ol>
            <p><strong>NB:</strong> These instructions apply to you for your R4D/P4D/Services Appraisees.</p>
            <li>On your dashboard, click on the appropriate link, e.g <strong>Manage R4D appraisal(s)</strong>.</li>
            <p>You can also click the <strong>R4D Appraisals</strong>.</p>
            <img src="assets/img-07-01.svg" alt="Screenshot of dashboard with 'Supervise' button" />

            <li>Click on the name of your Appraisee to edit their appraisal record for the current year.</li>
            <img src="assets/img-07-02-01.svg" alt="Screenshot of NRS Workplan link" />

            <li><strong>NB: </strong>As an appraiser, you can generate/download:</li>
            <ul>
              <li>The report for your staff, by clicking <strong>R</strong>.</li>
              <li>Their Workplan, by clicking <strong>WP</strong>.</li>
              <li>The Appraisal Record PDF, by clicking <strong>PDF</strong>.</li>
            </ul>
            <img src="assets/img-07-02-02.svg" alt="Screenshot of NRS Workplan link" />

            <li>Fill the form and score your appraisee appropriately.</li>
            <p><strong>NB: </strong>If the total weight of all the criteria is not 100% for the current year and next year, please edit accordingly and ensure that the total weight for both years equal 100%.</p>
            <img src="assets/img-07-03.svg" alt="Screenshot of Approve button" />

            <li>Click on <strong>Preview and Finalize</strong> only after you have completed all these processes.</li>
            <p>Click Save draft if you're not ready to submit the form.</p>
            <p>Ensure that the appraisee adds their comment.</p>
            <img src="assets/img-07-04.svg" alt="Screenshot of Workplan statuses" />
          </ol>
        </div>
      </div>

      <div class="faq" data-category="APPRAISER R4D/P4D">
        <button id="appraisals" class="accordion">
          How to Generate the PDF for my appraisee? (R4D/P4D/Services)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <ol>
            <p><strong>NB:</strong> These instructions apply to you for your R4D/P4D/Services Appraisees.</p>
            <li>On your dashboard, click on the appropriate link, e.g <strong>Manage R4D appraisal(s)</strong>.</li>
            <p>You can also click the <strong>R4D Appraisals</strong>.</p>
            <img src="assets/img-07-01.svg" alt="Screenshot of dashboard with 'Supervise' button" />

            <p>Generate/download: The report for your staff, by clicking <strong>R</strong>.</p>
            <img src="assets/img-07-02-03.svg" alt="Screenshot of NRS Workplan link" />
          </ol>
        </div>
      </div>

      <div class="faq" data-category="APPRAISEE NRS/IRS">
        <button class="accordion">
          How do I import my Workplan? (NRS/IRS)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p>1. On your dashboard, click on <strong>NRS Workplan</strong></p>
          <img src="assets/img-03-01.svg" alt="Dashboard Image" />

          <p>2. Click on <strong>import new workplans from Excel (.xls) file.</strong></p>
          <img src="assets/img-03-02.svg" alt="Dashboard Image" />

          <p>3. Choose a file, and then <strong>Upload.</strong></p>
          <img src="assets/img-03-03.svg" alt="Dashboard Image" />
          <p><strong>Important:</strong> Make sure the Excel file has the extension <strong> .xls </strong> (not .xslx)</p>
        </div>
      </div>

      <div class="faq" data-category="APPRAISEE NRS/IRS">
        <button class="accordion" id="submit-workplan">
          How do I update and submit my Workplan? (NRS/IRS)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p>One approach is to <strong>add new records to your Workplan</strong> directly on the site. Here's how:</p>
          <p>1. On your dashboard, click on <strong>NRS Workplan</strong></p>
          <img src="assets/img-01-01.svg" alt="Dashboard Image" />

          <p>2. Click the appropriate year: e.g <strong>2024</strong></p>
          <img src="assets/img-01-02.svg" alt="Pick a year" />

          <p>3. Click on the link <strong>add new records to your Workplan</strong> for the appropriate year</p>
          <img src="assets/img-01-03.svg" alt="Add new records to workplan" />

          <p>4. Enter the workplan objective, and click <strong>update</strong></p>
          <img src="assets/img-01-04.svg" alt="Update Objective" />

          <p>5. Click on the <strong>Details</strong> button on the Workplan</p>
          <img src="assets/img-01-05.svg" alt="Details Button Image" />

          <p>6. Click the button <strong>Add Kpi..</strong>(i.e Key Performance Index)</p>
          <img src="assets/img-01-06.svg" alt="Add KPI Button Image" />

          <p>7. Fill the form</p>
          <img src="assets/img-01-07.svg" alt="Fill Form" />

          <p>8. Click <strong>Update</strong></p>
          <img src="assets/img-01-08.svg" alt="Update Form" />

          <p>9. Click <strong>Submit</strong></p>
          <img src="assets/img-01-09.svg" alt="Update Form" />
        </div>
      </div>

      <div class="faq" data-category="APPRAISER NRS/IRS">
        <button class="accordion">
          How do I approve my appraisee's Workplan? (NRS/IRS)
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p>1. On your dashboard, click on <strong>Supervise</strong>.</p>
          <img src="assets/img-02-01.svg" alt="Update Form" />

          <p>2. <strong>Switch to</strong> the profile of the appraisee, for example, Charles Mwizerwa.</p>
          <img src="assets/img-02-02.svg" alt="Update Form" />

          <p>3. Click on the <strong>NRS Workplan</strong> link on your appraisee's dashboard.</p>
          <img src="assets/img-02-03.svg" alt="Update Form" />

          <p>4. Click on the <strong>Approve</strong> button.</p>
          <img src="assets/img-02-04.svg" alt="Update Form" />

          <p>5. Click on <strong>Return to yourself</strong>.</p>
          <img src="assets/img-02-05.svg" alt="Update Form" />
        </div>
      </div>

      <div class="faq" data-category="APPRAISEE NRS/IRS">
        <button class="accordion">
          What do I do if my NRS/IRS Workplan links aren't complete?
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p>
            If you can't find your NRS/IRS Workplan links, please <a href="mailto:IITAIT-SoftwareHelpDesk@cgiar.org?subject=Workplan%20Link%20Issue&amp;body=Staff%20ID%3A%20%5BYour%20Staff%20ID%5D%0D%0AAppraiser%2FSupervisor%3A%20%5BName%20of%20Your%20Appraiser%2FSupervisor%5D%0D%0AUnit%20or%20Program%3A%20%5BName%20of%20Your%20Unit%20or%20Program%5D%0D%0ACountry%3A%20%5BYour%20Country%5D%0D%0AStaff%20Category%3A%20%5BYour%20Staff%20Category%5D">click here to send an email</a> with the required details to resolve the issue. <br /><br />
            When you click on that link, you'll be taken to your email application, pre-filled with the recipient's address. There, you are to provide the relevant information.
          </p>
        </div>
      </div>

      <div class="faq" data-category="APPRAISEE NRS/IRS R4D/P4D">
        <button id="create-workplan" class="accordion">
          What is a Workplan and how do I create one?
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <ol>
            <li>
              <strong>Definition:</strong>
              <ul>
                <li>An R4D Workplan is a plan for a specific year within the PAR system.</li>
                <li>It consists of one or more workplan entries and additional text detailing planned activities.</li>
                <li>Information entered here is used to generate the annual Workplan PDF document.</li>
              </ul>
            </li>
            <li>
              <strong>How to create yours: Workplan Entry Details</strong> <br />
              <ul>
                <li>Create a new Excel file with extension <strong>.xls</strong></li>
                <p>Here is the Format you should follow:</p>
                Workplan Objective | KPI Text | KPI Activity | Milestone 1 | Milestone 2 | Milestone 3 | Milestone 4
                <br />
                <br />
                <p>Your Workplan entries should capture details like:</p>
                <ul class="left-padding-1rem">
                  <li>Output target description.</li>
                  <li>Actual outcome.</li>
                  <li>Intended user.</li>
                  <li>Participating and beneficiary countries.</li>
                  <li>Entry year, activity year, and output target year.</li>
                  <li>MTP Program linkage (if applicable).</li>
                  <li>Output target type (e.g., Practice, Materials, Policy strategies).</li>
                  <li>Outcome and impact.</li>
                </ul>
              </ul>
            </li>
          </ol>
        </div>
      </div>

      <div class="faq" data-category="APPRAISEE APPRAISER NRS/IRS R4D/P4D">
        <button id="contact" class="accordion">
          Who do I contact for enquiries and feedback, and how?
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div class="pannel">
          <p class="announcement a-tag-pri">
            Please contact <strong><a href="mailto:IITA-SDITSA@cgiar.org">IITA-SDITSA@cgiar.org</a></strong> if you have any further questions.
          </p>
          <p>We welcome your feedback and suggestions on how we can enhance our application to better meet your needs.</p>
        </div>
      </div>
    </div>

    <div id="noResultsMessage" class="none">
      <i class="fa-regular fa-face-frown"></i>
      <p>Nothing here. Please type something else, or contact us directly.</p>
    </div>

    <footer class="flex">
      <div class="footer-top-div flex">
        <div class="logo mr-5"><img src="assets/IITA-logo.gif" alt="" /></div>
        <div class="footer-links">
          <ul>
            <!-- To make a link that opens in a new tab when clicked, ADD   target="_blank" as an attribute. -->
            <li><a href="#" target="_blank">Home</a></li>
            <li><a href="mailto:par.support@gmail.com">Send us an email</a></li>
          </ul>
        </div>
      </div>
      <div class=""><hr class="style-one" /></div>
      <div class="">&copy;PAR. All rights reserved.</div>
    </footer>

    <script>
      // Declare variables
      var availableFAQs = Array.from(document.querySelectorAll(".faq"));
      var checkedCategories = [];
      var displayedFAQs = availableFAQs;
      var filterGroup2Visible = false;
      var filterGroup3Visible = false;

      // Functionality for the checkboxes
      document.addEventListener("DOMContentLoaded", function () {
        // Get all checkboxes
        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        // Add event listener to each checkbox
        checkboxes.forEach(function (checkbox) {
          checkbox.addEventListener("change", function () {
            // Verify if the checkbox is now checked
            if (this.checked) {
              var parentGroup = checkbox.closest(".filter-groups");
              var otherCheckboxes = parentGroup.querySelectorAll('input[type="checkbox"]');
              // Uncheck other checkboxes in the same group
              otherCheckboxes.forEach(function (otherCheckbox) {
                if (otherCheckbox !== checkbox && otherCheckbox.checked) {
                  uncheckOtherBox(otherCheckbox);
                }
              });

              addCategory(this);

              filterGroup2Visible = false;
              filterGroup3Visible = false;

              // If checkbox is in filter-group-1, uncheck checkboxes in group 2 and 3
              if (this.closest(".filter-group-1")) {
                var filterGroup2Checkboxes = document.querySelectorAll('.filter-group-2 input[type="checkbox"]');
                var filterGroup3Checkboxes = document.querySelectorAll('.filter-group-3 input[type="checkbox"]');
                filterGroup2Checkboxes.forEach(function (checkbox) {
                  uncheckOtherBox(checkbox);
                });
                filterGroup3Checkboxes.forEach(function (checkbox) {
                  uncheckOtherBox(checkbox);
                });
              }

              if (this.closest(".filter-group-1")) {
                // Determine which category was selected
                var category = this.closest(".filter-option").dataset.category;

                // Set filter group visibility based on the selected category
                if (category === "APPRAISEE") {
                  filterGroup2Visible = true;
                } else if (category === "APPRAISER") {
                  filterGroup3Visible = true;
                }
                // Update the display of filter groups
                updateFilterGroups();
              }

              updateFAQs();

              // Filter availableFAQs to include only FAQs that are displayed (have display: block)
              displayedFAQs = availableFAQs.filter(function (faq) {
                return faq.style.display === "block";
              });
              // Call searchAccordionPanels with the search term and the displayed FAQs
              searchAccordionPanels(document.getElementById("searchInput").value, displayedFAQs);
            } else {
              removeCategory(this.closest(".filter-option").dataset.category);

              // If checkbox is in filter-group-1, uncheck checkboxes in group 2 and 3
              if (this.closest(".filter-group-1")) {
                var filterGroup2Checkboxes = document.querySelectorAll('.filter-group-2 input[type="checkbox"]');
                var filterGroup3Checkboxes = document.querySelectorAll('.filter-group-3 input[type="checkbox"]');
                filterGroup2Checkboxes.forEach(function (checkbox) {
                  uncheckOtherBox(checkbox);
                });
                filterGroup3Checkboxes.forEach(function (checkbox) {
                  uncheckOtherBox(checkbox);
                });

                filterGroup2Visible = false;
                filterGroup3Visible = false;
                updateFilterGroups();
              }

              updateFAQs();

              // Filter availableFAQs to include only FAQs that are displayed (have display: block)
              displayedFAQs = availableFAQs.filter(function (faq) {
                return faq.style.display === "block";
              });
              // Call searchAccordionPanels with the search term and the displayed FAQs
              searchAccordionPanels(document.getElementById("searchInput").value, displayedFAQs);
            }
          });
        });
      });

      // Function to remove active class from filter groups
      function removeActivegroup(groupSelector) {
        var group = document.querySelector(groupSelector);
        group.classList.remove("active");
      }

      // Function to add active class to filter groups
      function addActivegroup(groupSelector) {
        var group = document.querySelector(groupSelector);
        group.classList.add("active");
      }

      // To uncheck boxes
      function uncheckOtherBox(checkbox) {
        checkbox.checked = false;
        removeCategory(checkbox.closest(".filter-option").dataset.category);
      }

      // Function to add category to checkedCategories array
      function addCategory(checkbox) {
        var addedCategory = checkbox.closest(".filter-option").dataset.category;
        if (!checkedCategories.includes(addedCategory)) {
          checkedCategories.push(addedCategory);
        }
      }

      // Function to remove category from checkedCategories array
      function removeCategory(removedCategory) {
        var index = checkedCategories.indexOf(removedCategory);
        if (index !== -1) {
          checkedCategories.splice(index, 1);
        }
      }

      // Function to update the display of filter groups
      function updateFilterGroups() {
        var filterGroup2 = document.querySelector(".filter-group-2");
        var filterGroup3 = document.querySelector(".filter-group-3");

        if (filterGroup2Visible) {
          filterGroup2.classList.add("active");
        } else {
          filterGroup2.classList.remove("active");
        }

        if (filterGroup3Visible) {
          filterGroup3.classList.add("active");
        } else {
          filterGroup3.classList.remove("active");
        }
      }

      // Function to update the display of FAQs based on checked categories
      function updateFAQs() {
        // Clear the search bar
        document.getElementById("searchInput").value = "";

        if (checkedCategories.length === 0) {
          // If no categories are checked, display all FAQs
          availableFAQs.forEach(function (faq) {
            faq.style.display = "block";
          });
        } else {
          availableFAQs.forEach(function (faq) {
            var categories = faq.dataset.category.split(" ");
            if (checkedCategories.every((category) => categories.includes(category))) {
              faq.style.display = "block";
            } else {
              faq.style.display = "none";
            }
          });
        }
      }

      // Search bar Function
      function searchAccordionPanels(searchTerm, availableFAQs) {
        searchTerm = searchTerm.toLowerCase();
        var anyResults = false;
        var noResultsMessage = document.getElementById("noResultsMessage");

        availableFAQs.forEach(function (faq) {
          var button = faq.querySelector(".accordion");
          var buttonContent = button.textContent.toLowerCase();

          var panel = faq.querySelector(".pannel");
          var panelText = panel.textContent.toLowerCase();

          if (buttonContent.includes(searchTerm) || panelText.includes(searchTerm)) {
            faq.style.display = "block";
            anyResults = true;
          } else {
            faq.style.display = "none";
          }

          // Show or hide the no results message based on search results
          if (anyResults) {
            noResultsMessage.classList.remove("nothing-here"); // Remove the class if there are results
            noResultsMessage.classList.add("none"); // Add the class if there are no results
          } else {
            noResultsMessage.classList.remove("none"); // Remove the class if there are results
            noResultsMessage.classList.add("nothing-here"); // Add the class if there are no results
          }
        });
      }

      // ** Search Functionality **
      // Get the input element
      var searchInput = document.getElementById("searchInput");

      // Add event listener for input changes
      searchInput.addEventListener("input", function () {
        var searchTerm = this.value.toLowerCase(); // Get the search term and convert to lowercase
        searchAccordionPanels(searchTerm, displayedFAQs);
      });

      // Functionality for handling accordion interactions (e.g., FAQs)
      var acc = document.getElementsByClassName("accordion");
      var i;

      for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
          this.classList.toggle("active");
          this.parentElement.classList.toggle("active");

          var pannel = this.nextElementSibling;

          // Close all other open accordions
          var openAccordions = document.querySelectorAll(".accordion.active");
          for (var j = 0; j < openAccordions.length; j++) {
            if (openAccordions[j] !== this) {
              openAccordions[j].classList.remove("active");
              openAccordions[j].parentElement.classList.remove("active");
              openAccordions[j].nextElementSibling.style.display = "none";
            }
          }

          if (pannel.style.display === "block") {
            pannel.style.display = "none";
          } else {
            pannel.style.display = "block";
            // Scroll to clicked accordion with a little offset above
            var offset = -50; // Adjust this value to set the desired offset
            setTimeout(() => {
              var targetOffsetTop = this.offsetTop + offset;
              window.scrollTo({ top: targetOffsetTop, behavior: "smooth" });
            }, 100); // 100 milliseconds delay
          }
        });
      }

      // Function to close all open accordions
      function closeAllAccordions() {
        var openAccordions = document.querySelectorAll(".accordion.active");
        for (var j = 0; j < openAccordions.length; j++) {
          openAccordions[j].classList.remove("active");
          openAccordions[j].parentElement.classList.remove("active");
          openAccordions[j].nextElementSibling.style.display = "none";
        }
      }

      // Function to close open accordions when clicking outside the wrapper
      document.body.addEventListener("click", function (event) {
        var wrapper = document.querySelector(".wrapper");
        var openAccordion = wrapper.querySelector(".accordion.active");

        if (openAccordion && !wrapper.contains(event.target)) {
          openAccordion.classList.remove("active");
          openAccordion.parentElement.classList.remove("active");
          openAccordion.nextElementSibling.style.display = "none";

          // Scroll to the top of the closed accordion
          var offset = -50; // Adjust this value to set the desired offset
          var targetOffsetTop = openAccordion.offsetTop + offset;
          window.scrollTo({ top: targetOffsetTop, behavior: "smooth" });
        }
      });
    </script>
  </body>
</html>
